{"hash":"5dbe5d68fb030cb55111de452963db35e006d0a4","data":{"allMarkdownPost":{"edges":[{"node":{"id":"762bea419387b7b60308a47ff34c1171","title":"라즈베리파이 우분투리눅스 저장소변경","content":"<h1 id=\"환경\"><a href=\"#%ED%99%98%EA%B2%BD\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>환경</h1>\n<p>Ubuntu 20.04.4 LTS(Raspberry Pi) 버전 기준<br>\n※ 데스크탑용 리눅스와 다름</p>\n<h1 id=\"서론\"><a href=\"#%EC%84%9C%EB%A1%A0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>서론</h1>\n<p>리눅스를 사용하다보면 패키지 업그레이드를 해줘야한다.\n그런데 업데이트 사이트가 해외사이트라 그런지 인터넷 연결 속도가 느려서 답답합을 느꼈다.\n그래서 국내 사이트로 업데이트 사이트를 변경해보았다.<br>\n라즈베리파이 공식사이트 들어가보면 <a href=\"https://www.raspbian.org/RaspbianMirrors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">미러</a>라고 주소가 쭈욱 나열이 되어있다.\n하지만 이상하게 변경을 해도 정상작동을 하지 않은 것 보니 주소가 업데이트가 되질 않았나보다.\n일일히 사이트 들어가서 확인한 결과 <a href=\"http://ftp.harukasan.org\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">harukasan</a> 이 미러만 정상적으로 미러링이 되고 있었다.\n그래서 이 사이트를 기준으로 라즈베리파이 우분투 리눅스 저장소를 변경해보았다.</p>\n<h1 id=\"미러사이트주소로-변경하기\"><a href=\"#%EB%AF%B8%EB%9F%AC%EC%82%AC%EC%9D%B4%ED%8A%B8%EC%A3%BC%EC%86%8C%EB%A1%9C-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>미러사이트주소로 변경하기</h1>\n<ol>\n<li>현재 sources.list 파일 백업해두기(수정이 잘못되었을경우 되돌리기위한 용도)</li>\n</ol>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /etc/apt/sources.list /etc/apt/sources.list.backup<span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<ol start=\"2\">\n<li>수정하기</li>\n</ol>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">sed</span> -i <span class=\"token string\">'s/ports.ubuntu.com/ftp.harukasan.org/g'</span> /etc/apt/sources.lisㅓ<span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<ol start=\"3\">\n<li>업데이트&#x26;업그레이드하기</li>\n</ol>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> ugprade<span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span></span></code></pre>\n<p>정상적으로 업데이트되면 정상완료.</p>\n<h1 id=\"결론\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>결론</h1>\n<p>업데이트를 했는데, 사실 공식사이트와 크게 차이가 나질 않은 것 같기도 하는 것 같기도하고..\n좀 더 지켜봐야겠다. 아무래도 업데이트 양이 많을 때 속도를 확인하는게 가장 좋을 듯 싶다.\n그리고 미러중에서도 ubuntu 폴더는 있는데 ubuntu-ports 폴더가 없는곳이 많다.\n정확하지는 않는데 ubuntu-ports가 아무래도 ARM기반 우분투 리눅스인듯하다.</p>\n","lang":"ko","category":["Raspberry Pi","Ubuntu Linux"],"date":"2022-04-13T16:40:00.000Z"}},{"node":{"id":"a373b5ffd308adf6bc937cc4f6444c67","title":"Postgresql 세션 정보확인 및 종료","content":"<p>PostgreSQL 13.3 버전 기준</p>\n<p>현재 접속중인 세션 정보 목록 확인\n현재 접속중인 세션의 PID 항목을 복사한다.</p>\n<pre class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> pg_stat_activity<span class=\"token punctuation\">;</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<p>쿼리 실행 취소\n쿼리 실행 취소할 세션의 PID를 넣고 쿼리를 실행하면 해당 쿼리는 종료된다.</p>\n<pre class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> pg_cancel_backend<span class=\"token punctuation\">(</span>PID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<p>세션을 종료할려는 경우 아래 쿼리에 PID를 넣고 실행하면, 세션 강제종료된다.</p>\n<pre class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> pg_terminate_backend<span class=\"token punctuation\">(</span>PID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n","lang":"ko","category":["Database","Postgresql"],"date":"2022-04-12T23:04:30.000Z"}},{"node":{"id":"906c3848e5a48ecefada387dd163acd4","title":"Nodejs Yarn 설치","content":"<h1 id=\"yarn-설치\"><a href=\"#yarn-%EC%84%A4%EC%B9%98\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>yarn 설치</h1>\n<p><a href=\"https://yarnpkg.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">yarn 공식사이트</a>에 들어갔다. <a href=\"https://yarnpkg.com/getting-started/install\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">설치페이지</a>에서 확인하니 노트 16.10부터 corepack이라는 것에 기본 탑재 되었나보다.\n아래의 명령어만 호출해주면 끝. </p>\n<blockquote>\n<p>Node.js >=16.10<br>\nCorepack is included by default with all Node.js installs, but is currently opt-in. To enable it, run the following command:</p>\n</blockquote>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\">corepack <span class=\"token builtin class-name\">enable</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<p>노드가 16.10미만 버전인경우</p>\n<blockquote>\n<p>Node.js &#x3C;16.10<br>\nCorepack isn't included with Node.js in versions before the 16.10; to address that, run:</p>\n</blockquote>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i -g corepack<span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<p>설치해주면 된다.</p>\n<hr>\n<h1 id=\"트러블슈팅\"><a href=\"#%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>트러블슈팅</h1>\n<h2 id=\"오류현상\"><a href=\"#%EC%98%A4%EB%A5%98%ED%98%84%EC%83%81\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>[오류현상]</h2>\n<p>환경: Windows 10 Home<br>\n증상: corepack enable 명령어 실행시 아래와 같은 오류 발생</p>\n<pre class=\"language-powershell line-numbers\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\> corepack enable\nInternal Error: EPERM: operation not permitted<span class=\"token punctuation\">,</span> open <span class=\"token string\">'C:\\Program Files\\nodejs\\pnpm'</span>\nError: EPERM: operation not permitted<span class=\"token punctuation\">,</span> open <span class=\"token string\">'C:\\Program Files\\nodejs\\pnpm'</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"원인파악\"><a href=\"#%EC%9B%90%EC%9D%B8%ED%8C%8C%EC%95%85\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>[원인파악]</h2>\n<p>operation not permitted라는 메시지로 보아 권한 문제로 판단됨.</p>\n<h2 id=\"조치--방안검토\"><a href=\"#%EC%A1%B0%EC%B9%98--%EB%B0%A9%EC%95%88%EA%B2%80%ED%86%A0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>[조치 &#x26; 방안검토]</h2>\n<p>powershell을 관리자권한으로 실행하면 아래와 같이 정상 처리됨</p>\n<pre class=\"language-powershell line-numbers\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\> corepack enable\n<span class=\"token function\">PS</span> C:\\><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span></span></code></pre>\n<p>끝</p>\n","lang":"ko","category":["Node.js","개발환경"],"date":"2022-04-10T22:35:00.000Z"}},{"node":{"id":"88f16e93d454fd860827533a02bc5e96","title":"vue-router 개발자 도구에서 오류","content":"<h2 id=\"오류\"><a href=\"#%EC%98%A4%EB%A5%98\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>[오류]</h2>\n<h3 id=\"환경\"><a href=\"#%ED%99%98%EA%B2%BD\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>환경</h3>\n<p>OS: Windows 10<br>\nVue: 3.2.31<br>\nVue router: 4.0.14  </p>\n<hr>\n<p>vue를 브라우저 개발자 도구(devtools)를 실행시키고 실행하다보면 아래와 같은 오류가 발생한 경우가 나온다.<br>\n(개발자 도구를 실행하지 않은 경우는 발생하지 않음)</p>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\">vue-router.esm-bundler.js?6c02:2489 Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> TypeError: api.now is not a <span class=\"token keyword\">function</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<h2 id=\"원인확인\"><a href=\"#%EC%9B%90%EC%9D%B8%ED%99%95%EC%9D%B8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>[원인확인]</h2>\n<p>버전 문제 이지 않을까 검색을 해보았다. 검색 해본 결과 버전문제가 맞는 듯 했다.</p>\n<h2 id=\"결론\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>[결론]</h2>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> remove vue-router\nyear <span class=\"token function\">add</span> vue-router@4.0.13<span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span></span></code></pre>\n<p>검색한 내용을 토대로 버전을 이전버전으로 돌리니 개발자도구(devtools)에서도 오류 없이 정상적으로 작동했다.</p>\n<h2 id=\"참고자료\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>[참고자료]</h2>\n<p><a href=\"https://github.com/vuejs/router/issues/1338\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Router not working on 4.0.14 -> Use the vue-devtools stable to solve this #1338</a></p>\n","lang":"ko","category":["FrontEnd","Vue3"],"date":"2022-04-09T08:45:25.000Z"}},{"node":{"id":"56a8deb7299a7d262f092993f5878abe","title":"블로그를 시작한 이유와 목표","content":"<p>IT경력도 생각보다 꽤나 오래되었는데도 불구하고, 그 동안 공부를 해왔던것에 대해서 기록이 없다.\n그래서 시간이 지나게되면 까먹기도 하고, 다시 공부를 했었던 것에 대해서 필요한 게 있으면\n또 다시 공부를 해야하거나, 자료를 찾아야 한다. 그러한 시간들이 은근히 적지 않았고, 그럴때마다 시간이 무척이나 아깝고, 나 자신이 한심하게 느껴졌다.</p>\n<p>그래서 계속 정리를 해야하지 하다가 이제서야 시간을 내어서 블로그를 만들고 정리하려고 한다.\n또한 내가 알아가는 것들에 대한 정보도 다른 사람들과 같이 공유하는 것도 이 블로그를 시작하게 된 이유중에 하나다.\n나 또한 공부해가면서 다른 사람들이 공유해준 정보를 바탕으로 성장해왔으니 나 또한 그렇게 하는 것이 맞다고 생각하기 때문이다.</p>\n<p>이제부터 하나씩 정리해가면서 더 이상 해매지 않도록 해야겠다. 글 수준이 엄청 어려운게 아니라, 정말 간단한 팁도 포함할 것 이다.(어려운글은 잘쓰지도 못한다.) 그래서 최소 하루에 한개씩, 글 등록을 일주일에 최소 7개로 목표를 삼고 진행한다!\n내가 당일에 습득한 먼지만한 지식도 올릴 것 이다.</p>\n<p>아자아자 화이팅!</p>\n","lang":"ko","category":["blog","에세이"],"date":"2022-04-05T17:24:25.000Z"}},{"node":{"id":"dd930f951c4f72cdeb89d95a799779f7","title":"라즈베리파이 하드디스크 온도 확인","content":"<p>Ubuntu Linux 5.4.0-1056-raspi 버전 기준(Rasberry Pi OS 기준)</p>\n<p><a href=\"https://www.smartmontools.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Smartmontools</a> 이라는 패키지를 설치해야 현재 하드디스크 온도를 확인 할 수 있다.\n패키지를 설치한다.</p>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> smartmontools<span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<p>설치후에 실행을 해본다.</p>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> smartctl -A /dev/sda<span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<p>결과가 아래와 같이 출력된다.</p>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> smartctl -A /dev/sda\nsmartctl <span class=\"token number\">7.1</span> <span class=\"token number\">2019</span>-12-30 r5022 <span class=\"token punctuation\">[</span>aarch64-linux-5.4.0-1056-raspi<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span>local build<span class=\"token punctuation\">)</span>\nCopyright <span class=\"token punctuation\">(</span>C<span class=\"token punctuation\">)</span> <span class=\"token number\">2002</span>-19, Bruce Allen, Christian Franke, www.smartmontools.org\n\n<span class=\"token operator\">==</span><span class=\"token operator\">=</span> START OF READ SMART DATA SECTION <span class=\"token operator\">==</span><span class=\"token operator\">=</span>\nSMART Attributes Data Structure revision number: <span class=\"token number\">16</span>\nVendor Specific SMART Attributes with Thresholds:\nID<span class=\"token comment\"># ATTRIBUTE_NAME          FLAG     VALUE WORST THRESH TYPE      UPDATED  WHEN_FAILED RAW_VALUE</span>\n  <span class=\"token number\">1</span> Raw_Read_Error_Rate     0x000b   <span class=\"token number\">100</span>   <span class=\"token number\">100</span>   016    Pre-fail  Always       -       <span class=\"token number\">0</span>\n  <span class=\"token number\">2</span> Throughput_Performance  0x0004   <span class=\"token number\">128</span>   <span class=\"token number\">128</span>   054    Old_age   Offline      -       <span class=\"token number\">108</span>\n  <span class=\"token number\">3</span> Spin_Up_Time            0x0007   <span class=\"token number\">154</span>   <span class=\"token number\">154</span>   024    Pre-fail  Always       -       <span class=\"token number\">528</span> <span class=\"token punctuation\">(</span>Average <span class=\"token number\">527</span><span class=\"token punctuation\">)</span>\n  <span class=\"token number\">4</span> Start_Stop_Count        0x0012   <span class=\"token number\">100</span>   <span class=\"token number\">100</span>   000    Old_age   Always       -       <span class=\"token number\">1473</span>\n  <span class=\"token number\">5</span> Reallocated_Sector_Ct   0x0033   <span class=\"token number\">100</span>   <span class=\"token number\">100</span>   005    Pre-fail  Always       -       <span class=\"token number\">0</span>\n  <span class=\"token number\">7</span> Seek_Error_Rate         0x000a   <span class=\"token number\">100</span>   <span class=\"token number\">100</span>   067    Old_age   Always       -       <span class=\"token number\">0</span>\n  <span class=\"token number\">8</span> Seek_Time_Performance   0x0004   <span class=\"token number\">128</span>   <span class=\"token number\">128</span>   020    Old_age   Offline      -       <span class=\"token number\">18</span>\n  <span class=\"token number\">9</span> Power_On_Hours          0x0012   <span class=\"token number\">100</span>   <span class=\"token number\">100</span>   000    Old_age   Always       -       <span class=\"token number\">1036</span>\n <span class=\"token number\">10</span> Spin_Retry_Count        0x0012   <span class=\"token number\">100</span>   <span class=\"token number\">100</span>   060    Old_age   Always       -       <span class=\"token number\">0</span>\n <span class=\"token number\">12</span> Power_Cycle_Count       0x0032   <span class=\"token number\">100</span>   <span class=\"token number\">100</span>   000    Old_age   Always       -       <span class=\"token number\">47</span>\n<span class=\"token number\">192</span> Power-Off_Retract_Count 0x0032   099   099   000    Old_age   Always       -       <span class=\"token number\">1520</span>\n<span class=\"token number\">193</span> Load_Cycle_Count        0x0012   099   099   000    Old_age   Always       -       <span class=\"token number\">1520</span>\n<span class=\"token number\">194</span> Temperature_Celsius     0x0002   <span class=\"token number\">151</span>   <span class=\"token number\">151</span>   000    Old_age   Always       -       <span class=\"token number\">43</span> <span class=\"token punctuation\">(</span>Min/Max <span class=\"token number\">14</span>/56<span class=\"token punctuation\">)</span>\n<span class=\"token number\">196</span> Reallocated_Event_Count 0x0032   <span class=\"token number\">100</span>   <span class=\"token number\">100</span>   000    Old_age   Always       -       <span class=\"token number\">0</span>\n<span class=\"token number\">197</span> Current_Pending_Sector  0x0022   <span class=\"token number\">100</span>   <span class=\"token number\">100</span>   000    Old_age   Always       -       <span class=\"token number\">0</span>\n<span class=\"token number\">198</span> Offline_Uncorrectable   0x0008   <span class=\"token number\">100</span>   <span class=\"token number\">100</span>   000    Old_age   Offline      -       <span class=\"token number\">0</span>\n<span class=\"token number\">199</span> UDMA_CRC_Error_Count    0x000a   <span class=\"token number\">200</span>   <span class=\"token number\">200</span>   000    Old_age   Always       -       <span class=\"token number\">17</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ID 194번 Temperature_Celsius이 현재 하드디스크 온도이다.</p>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token number\">194</span> Temperature_Celsius     0x0002   <span class=\"token number\">151</span>   <span class=\"token number\">151</span>   000    Old_age   Always       -       <span class=\"token number\">43</span> <span class=\"token punctuation\">(</span>Min/Max <span class=\"token number\">14</span>/56<span class=\"token punctuation\">)</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<p>현재 내 라즈베리파이에 연결된 하드디스크 온도는 43도이다.\n온도만 출력 되도록 보완해서 온도만 출력 하겠다.</p>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> smartctl -A /dev/sda <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> Temperature_Celsius <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $10 \" °C\"}'</span>\n<span class=\"token number\">45</span> °C<span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span></span></code></pre>\n<p>현재 하드디스크 온도만 직관적으로 잘 출력된다.</p>\n","lang":"ko","category":["Raspberry Pi","Ubuntu Linux"],"date":"2022-04-03T19:06:00.000Z"}},{"node":{"id":"b222cce552056a4d1515fefb02e4d8e1","title":"라즈베리파이 Ubuntu Linux CPU 온도확인","content":"<p>Ubuntu Linux 5.4.0-1056-raspi 버전 기준(Rasberry Pi OS 기준)</p>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">cat</span> /sys/class/thermal/thermal_zone0/temp\n<span class=\"token number\">42355</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span></span></code></pre>\n<p>결과가 42355로 나오는데, 1,000을 나누면 현재 온도이다. 현재 내 Rasberry Pi CPU온도는 42.355도 이다.\n보기좋게 출력하기 위해서 아래와 같이 보완했다.</p>\n<pre class=\"language-bash line-numbers\"><code class=\"language-bash\">$  <span class=\"token function\">cat</span> /sys/class/thermal/thermal_zone0/temp <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $1/1000 \" °C\"}'</span>\n<span class=\"token number\">42.355</span> °C<span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span></span></code></pre>\n<p>훨씬 더 직관적이다!</p>\n","lang":"ko","category":["Raspberry Pi","Ubuntu Linux"],"date":"2022-04-03T18:10:30.000Z"}},{"node":{"id":"612bbaeecf240b726e6913aacfad9bf5","title":"PostgreSQL INSERT시 TIMESTAMPTZ 컬럼 UTC로 셋팅","content":"<p>테이블생성 DDL</p>\n<pre class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> tb_member <span class=\"token punctuation\">(</span>\n\tmember_id uuid <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\n\tmember_name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\n\teffective_date timestamptz <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\n\texpiration_date timestamptz <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span><span class=\"token punctuation\">(</span>member_id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>글로벌용 프로그램을 개발하다보면 timezone 관련해서 고민이 필요하다.\nexpiration_date 항목에 UTC 9999-12-31 23:59:59.999999 데이터를 집어넣으려고 한다.\n하지만 그냥 insert 할 경우 현재 환경에 셋팅된 시간(나의 경우 GMT+9)으로 들어간다.</p>\n<p>그래서 9999-12-31 23:59:59.999999 이 데이터가 utc라는걸 셋팅해줘야 된다.\n아래의 형태로 형 변환을 하면 된다.</p>\n<pre class=\"language-sql line-numbers\"><code class=\"language-sql\">TO_TIMESTAMP<span class=\"token punctuation\">(</span><span class=\"token string\">'99991231 235959.999999'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'YYYYMMDD HH24MISS.US'</span><span class=\"token punctuation\">)</span>::<span class=\"token keyword\">timestamp</span> without <span class=\"token keyword\">time</span> zone at <span class=\"token keyword\">time</span> zone <span class=\"token string\">'utc'</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<p>최종 SQL INSERT</p>\n<pre class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> tb_member <span class=\"token keyword\">values</span><span class=\"token punctuation\">(</span>gen_random_uuid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'기본'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> TO_TIMESTAMP<span class=\"token punctuation\">(</span><span class=\"token string\">'99991231 235959.999999'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'YYYYMMDD HH24MISS.US'</span><span class=\"token punctuation\">)</span>::<span class=\"token keyword\">timestamp</span> without <span class=\"token keyword\">time</span> zone at <span class=\"token keyword\">time</span> zone <span class=\"token string\">'utc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<p>[참고자료]<br>\n<a href=\"https://stackoverflow.com/questions/42684304/how-to-convert-a-string-to-timestamp-in-a-desired-timezone\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">how to convert a string to timestamp in a desired timezone - stackoverflow</a></p>\n","lang":"ko","category":["Database","Postgresql"],"date":"2022-04-03T17:24:25.000Z"}}]}},"context":{}}